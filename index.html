<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Dock | Docker for the Dev Loop</title>

    <link rel="icon" type="image/svg+xml" href="/src/img/dock_white_background.svg" />
    <link rel="stylesheet" href="/src/css/normalise.less" />
    <link rel="stylesheet" href="/src/css/index.less" />
  </head>
  <body>

    <header>
      <h1>
        <img
          title="Dock"
          alt="The word Dock written in white in the Milkshake font."
          src="/src/img/dock_heading_white.svg"
        />
      </h1>

      <a href="https://github.com/ezanmoto/dock">
        <img
          srcset="
            /src/img/github_mark_light_32px.png,
            /src/img/github_mark_light_64px.png 2x,
            /src/img/github_mark_light_120px_plus.png 4x
          "
          src="/src/img/github_mark_light_120px_plus.png"
          alt="
            The GitHub Octocat mark, which is a white circle with the
            silhouette of the Octocat cut out of it.
          "
        />
      </a>
    </header>

    <section class="hero">
      <div class="container">

        <div class="code-editor">
          <div class="control-bar">
            <span class="control-button red"></span>
            <span class="control-button yellow"></span>
            <span class="control-button green"></span>
          </div>
          <pre>
<span class="prompt">joe<span class="at">@</span>/home/joe<span class="dollar">$</span></span> git clone https://github.com/joe/project.git
<span class="prompt">joe<span class="at">@</span>/home/joe<span class="dollar">$</span></span> cd project
<span class="prompt">joe<span class="at">@</span>/home/joe/project<span class="dollar">$</span></span> target/hello
  <span class="failure">✗</span> target/hello: No such file or directory
<span class="prompt">joe<span class="at">@</span>/home/joe/project<span class="dollar">$</span></span> make
  <span class="failure">✗</span> make: command not found
<span class="prompt">joe<span class="at">@</span>/home/joe/project<span class="dollar">$</span></span> <strong>dock</strong>
<span class="dock-prompt">hostuser<span class="at">@</span>/project<span class="dollar">$</span></span> make
    Building...
    Built 'target/hello'
<span class="dock-prompt">hostuser<span class="at">@</span>/project<span class="dollar">$</span></span> exit
<span class="prompt">joe<span class="at">@</span>/home/joe/project<span class="dollar">$</span></span> target/hello
    Hello, world!</pre>

          <img
            class="logo-tag"
            src="/src/img/dock_white_background.svg"
            alt="The Dock logo on a white background"
          />
        </div>
      </div>
    </section>

    <section class="getting-started">
      <div class="container">
        <h2>
          <img
            title="Getting Started"
            alt="
              The phrase 'Getting Started', written in white in the Milkshake
              font.
            "
            src="/src/img/getting_started_heading_white.svg"
          />
        </h2>

        <ol>

          <li class="highlighted">
            <div class="instructions">
              <h3>1. <code>dock init</code></h3>
              <p>
                Adds <code>dock.yaml</code> and <code>build.Dockerfile</code>
              </p>
            </div>
            <div class="code-editor">
              <div class="control-bar">
                <span class="control-button red"></span>
                <span class="control-button yellow"></span>
                <span class="control-button green"></span>
              </div>
              <pre>
<span class="prompt"><span class="dollar">$</span></span> dock init rust
<span class="stdout">    Skipped './Cargo.toml'
    Skipped './src'
    Skipped './src/main.rs'
    Created './build.Dockerfile'
    Created './dock.yaml'</span>


              </pre>
            </div>
          </li>

          <li>
            <div class="instructions">
              <h3>2. <code>dock shell -D</code></h3>
              <p>
                Work from within your build enviroment
              </p>
            </div>
            <div class="code-editor">
              <div class="control-bar">
                <span class="control-button red"></span>
                <span class="control-button yellow"></span>
                <span class="control-button green"></span>
              </div>
              <pre>
<span class="prompt"><span class="dollar">$</span></span> dock shell -D
<span class="stdout">    [$] docker build ...
    [&gt;] Sending build context to Docker daemon
    [&gt;] ...
    [&gt;] Successfully tagged org/proj.build:latest
    ...
    [$] docker run ...</span>
<span class="dock-prompt">[&gt;] I have no name!<span class="at">@</span>host<span class="dollar">$</span></span> ls
<span class="stdout">    [&gt;] build.Dockerfile Cargo.toml dock.yaml src</span></pre>
            </div>
          </li>

          <li>
            <div class="instructions">
              <h3>3. <code>dock</code></h3>
              <p>
                Don't output debugging information
              </p>
            </div>
            <div class="code-editor">
              <div class="control-bar">
                <span class="control-button red"></span>
                <span class="control-button yellow"></span>
                <span class="control-button green"></span>
              </div>
              <pre>
<span class="prompt"><span class="dollar">$</span></span> cargo run
  <span class="failure">✗</span> <span class="stdout">The program 'cargo' is currently not installed.</span>
<span class="prompt"><span class="dollar">$</span></span> dock
<span class="dock-prompt">I have no name!<span class="at">@</span>host<span class="dollar">$</span></span> cargo run
<span class="stdout">       Compiling proj v0.0.1 (/app)
        Finished dev [unoptimized + debuginfo] target(s)
         Running `target/debug/proj`
    hello, world!</span>
              </pre>
            </div>
          </li>
        </ol>
      </div>
    </section>

    <section class="installation">
      <div class="container">
        <h2>
          <img
            title="Installation"
            alt="
              The phrase 'Installation', written in teal in the Milkshake font.
            "
            src="/src/img/installation_heading_teal.svg"
          />
        </h2>
        <ul>

          <li>
            <div class="instructions">
              <h3>With Rust</h3>
              <p>
                <code>cargo</code> can be used to build and install the latest
                version of the project. Note that this requires setting the
                <code class="env-var">DOCK_DEFAULT_TEMPLATES_SOURCE</code>
                environment variable.
              </p>
            </div>
            <div class="code-editor">
              <div class="control-bar">
                <span class="control-button red"></span>
                <span class="control-button yellow"></span>
                <span class="control-button green"></span>
              </div>
              <pre>
<span class="prompt"><span class="dollar">$</span></span> export DOCK_DEFAULT_TEMPLATES_SOURCE='git:https://github.com/ezanmoto/dock_init_templates.git:0.1:./templates'
<span class="prompt"><span class="dollar">$</span></span> cargo install --git https://github.com/ezanmoto/dock
<span class="stdout">    ...
       Compiling dock v0.35.5
        Finished release [optimized] target(s)
      Installing /cargo/bin/dock
       Installed package `dock v0.35.5`</span>
<span class="prompt"><span class="dollar">$</span></span> /cargo/bin/dock --version
<span class="stdout">    dock 0.35.5</span></pre>
            </div>
          </li>

        </ul>
      </div>
    </section>

    <section class="features">
      <div class="container">
        <h2>Features</h2>

        <ul>

          <li>
            <h3><a href="https://github.com/eZanmoto/dock#dock-run-in">Rebuild</a></h3>
            <p>
              <code>dock</code> always rebuilds images before running commands
              in them. This keeps you in sync with your team and your current
              branch automatically.
            </p>
          </li>

          <li>
            <h3><a href="https://github.com/eZanmoto/dock#configuration">Mount local</a></h3>
            <p>
              You can easily mount your local user, group and project directory
              to make it feel like you're building locally, which avoids the
              pitfalls of running as <code>root</code> in your build containers.
            </p>
          </li>

          <li>
            <h3><a href="https://github.com/eZanmoto/dock#cache_volumes">Cache volumes</a></h3>
            <p>
              Dock's special cache volumes help you share reusable caches
              between your build environments, while also making them usable by
              non-<code>root</code> users.
            </p>
          </li>

          <li>
            <h3><a href="https://github.com/eZanmoto/dock#flags">Debug</a></h3>
            <p>
              Dock is a relatively thin wrapper around the Docker CLI. Use
              <code>-D</code> with most subcommands to see what
              <code>dock</code> is running under the hood.
            </p>
          </li>

          <li>
            <h3><a href="https://github.com/eZanmoto/dock#default-flags-1">Host network in <code>shell</code></a></h3>
            <p>
              Services you run while you're in <code>dock shell</code> are
              automatically available on <code>localhost</code>.
            </p>
          </li>

        </ul>
      </div>
    </section>

    <section class="benefits">
      <div class="container">
        <h2>Benefits</h2>
        <ul>

          <li>
            <h3>Local/CI parity</h3>
            <p>
              Running commands in the same containerised environments locally
              and in the build pipeline minimises differences, and can
              dramatically help with debugging both.
            </p>
          </li>

          <li>
            <h3>Team parity</h3>
            <p>
              As with the build pipeline, having team members on the exact same
              versions of system dependencies helps to avoid using features that
              not all members have, like an OS-level lock file.
            </p>
          </li>

          <li>
            <h3>Onboarding</h3>
            <p>
              Onboarding onto a new project can be as simple as running
              <code>dock</code>, because you now have a shell with access to all
              the system dependencies of the project.
            </p>
          </li>

          <li>
            <h3>Avoid accidental dependencies</h3>
            <p>
              Running a different version of your OS to your CI can make it easy
              to depend on local functionality that doesn't exist remotely, but
              developing in containers can help to avoid this.
            </p>
          </li>

          <li>
            <h3>Executable environment definition</h3>
            <p>
              Developers that still want to install dependencies locally can
              follow the steps laid out in the <code>build.Dockerfile</code>,
              rather than <a
              href="https://benzaita.github.io/dockerized-cli/explanations/why_use_dockerized/#what-ive-seen-people-usually-do-and-have-done-by-myself">steps
              defined manually in the README</a>.
            </p>
          </li>

          <li>
            <h3>Versioned build environment</h3>
            <p>
              Having your environment definition committed as code means that
              you can version your build environment in the same way as other
              dependencies, keeping your team and CI in sync automatically.
            </p>
          </li>

        </ul>
      </div>
    </section>

    <section class="best-practices">
      <div class="container">
        <h2>Best Practices</h2>

        <div>
          <h3>When to use Dock</h3>

          <p>
            Dock is primarily intended to be used as part of your local
            development process. It should ideally be used in your team's
            centralised build pipeline too, to build artefacts and images for
            production use.
          </p>

          <p>
            Note that Dock commands shouldn't be used to directly run production
            services (by using <code>dock run-in prod-env: serve</code>, for
            example). This is because the features that Dock provides are primarily
            for speeding up development, particularly through the use of bind
            mounts (volumes are generally more appropriate for production
            scenarios). Instead, a dedicated container orchestrator like Docker
            Compose should be used instead of Dock for running production
            workloads.
          </p>
        </div>
      </div>
    </section>

    <section class="alternatives">
      <div class="container">
        <h2>Alternatives</h2>

        <div>
          <h3>
            <a href="https://github.com/benzaita/dockerized-cli/">
              dockerized
            </a>
          </h3>

          <p class="quote">
            dockerized is a tool for seamlessly executing commands in a
            container.
          </p>

          <p>
            Where Dock is a thin wrapper around the Docker CLI, <a
            href="https://benzaita.github.io/dockerized-cli/explanations/how_dockerized_exec_works/">dockerized
            is a thin wrapper around Docker Compose</a>, which is used to
            achieve similar functionality.
          </p>
        </div>
      </div>
    </section>

    <footer>
      <div class="container">
        <p>
          Dock heading written in <a
          href="https://www.boldfacedgoods.com/products/milkshake-2">Milkshake</a>
          and provided by <a href="https://www.boldfacedgoods.com">Boldfaced</a>.
        </p>
      </div>
    </footer>

    <script src="/src/js/index.js"></script>
  </body>
</html>
